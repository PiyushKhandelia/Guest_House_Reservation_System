<html>
    <head>
        <link rel="icon" type="image/x-icon" href="https://piyushkhandelia.github.io/Guest_House_Reservation_System/Images/bit_logo.png">
        <link rel="stylesheet" href="https://piyushkhandelia.github.io/Guest_House_Reservation_System/css/login_signup.css">
        <link rel="stylesheet" href="https://piyushkhandelia.github.io/Guest_House_Reservation_System/css/homepage.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>LOGIN/SIGNUP</title>
    </head>
    <body>
        <div class="header_div">
            <div class="left_div"></div>
            <div class="right_div">
                <div class="nav">
                    <a href="https://piyushkhandelia.github.io/Guest_House_Reservation_System/index.html"><button>Home</button></a>
                    <a href="https://piyushkhandelia.github.io/Guest_House_Reservation_System/Pages/gallery.html"><button>Gallery</button></a>
                    <a href="https://piyushkhandelia.github.io/Guest_House_Reservation_System/Pages/contact_us.html"><button>Contact Us</button></a>
                    <a href="https://piyushkhandelia.github.io/Guest_House_Reservation_System/Pages/signup.html"><button>Login/SignUp</button></a>
                </div>
            </div>
        </div>
        <div class="background">
            <!-- container div -->
            <div class="container">
                <!-- upper button section to select the login or signup form -->
                <div class="slider"></div>
                <div class="btn">
                    <button class="login">Login</button>
                    <button class="signup">Signup</button>
                </div>
                <!-- Form section that contains the login and the signup form -->
                <div class="form-section">
                    <!-- login form -->
                    <div class="login-box">
                        <input type="email" class="email ele" placeholder="Email">
                        <div class="password-wrapper">
                            <input type="password" class="password ele" id="loginPassword" placeholder="Password">
                            <i class="fas fa-eye password-toggle-icon" onclick="togglePassword('loginPassword')"></i>
                        </div>
                        <button class="clkbtn">Login</button>
                        <div class="input">
                            <button id="google-login-btns" class="google-button">
                            <i class="fab fa-google"></i>Login with Google
                          </button>
                        </div>
                    </div>
                    <!-- signup form -->
                    <div class="signup-box">
                        <input type="text" class="name ele" placeholder="Name">
                        <input type="email" class="email ele" id="signupEmail" placeholder="Email">
                        <div class="password-wrapper">
                            <input type="password" class="password ele" id="signupPassword" placeholder="Password">
                            <i class="fas fa-eye password-toggle-icon" onclick="togglePassword('signupPassword')"></i>
                        </div>
                        <div class="password-wrapper">
                            <input type="password" class="password ele" id="confirmPassword" placeholder="Confirm Password">
                            <i class="fas fa-eye password-toggle-icon" onclick="togglePassword('confirmPassword')"></i>
                        </div>
                        <button class="clkbtn small-btn" id="google-signup-btn" style="height: 300px; width: 200px;background-color:aqua">SIGN UP</button>
                        <div class="input">
                            <button id="google-login-btn" class="google-button">
                            <i class="fab fa-google"></i>Signup with Google
                          </button>
                        </div>
                    </div>
    
                </div>
            </div>
        </div>
    </body>
    <script src="https://piyushkhandelia.github.io/Guest_House_Reservation_System/js/validation.js"></script>
    <script src="https://piyushkhandelia.github.io/Guest_House_Reservation_System/js/login_with_google.js" defer type="module"></script>
    <!--
    <script src="https://piyushkhandelia.github.io/Guest_House_Reservation_System/js/signup_with_google.js" defer type="module"></script>
    -->
    <script type="module">

import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.1/firebase-app.js";
import { getAuth, GoogleAuthProvider, signInWithPopup, createUserWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/10.8.1/firebase-auth.js";

const firebaseConfig = {
    apiKey: "AIzaSyBLHdQpcdEPBxHG8_pI49ctq7FfEDK9KmM",
    authDomain: "guesthousereservationsystem.firebaseapp.com",
    projectId: "guesthousereservationsystem",
    storageBucket: "guesthousereservationsystem.appspot.com",
    messagingSenderId: "324476262968",
    appId: "1:324476262968:web:887539776c70257702e4cd"
};

// Initialize Firebase
const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
auth.languageCode = 'en';
const googleProvider = new GoogleAuthProvider();

// Google Sign-in
const googleLogin = document.getElementById("google-login-btn");
googleLogin.addEventListener("click", function() {
    signInWithPopup(auth, googleProvider)
        .then((result) => {
            // This gives you a Google Access Token. You can use it to access the Google API.
            const credential = GoogleAuthProvider.credentialFromResult(result);
            // The signed-in user info.
            const user = result.user;
            // IdP data available using getAdditionalUserInfo(result)
            // ...
            console.log(user);
            alert("Login Successful");
            window.location.href="https://piyushkhandelia.github.io/Guest_House_Reservation_System/Pages/booking.html";
        }).catch((error) => {
            // Handle Errors here.
            const errorCode = error.code;
            const errorMessage = error.message;
            alert(errorMessage);
        });
});

// Email/Password Sign-up
const emailSignUp = document.getElementById("google-signup-btn");
emailSignUp.addEventListener("click", function (event) {
    event.preventDefault()
    alert("Pleast wait for some time. It may take upto 1 minutes.");
    //inputs
    const email = document.getElementById('signupEmail').value;
    const password = document.getElementById('signupPassword').value;
    createUserWithEmailAndPassword(auth, email, password)
        .then((userCredential) => {
            // Signed up 
            const user = userCredential.user;
            alert("SignUp Successful");
        })
        .catch((error) => {
            const errorMessage = error.message;
            alert(errorMessage);
        });
});

    </script>
</html>